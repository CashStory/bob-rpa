var bobRpa=function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/Users/martindonadieu/Documents/Projects.nosync/Cashstory/bob-rpa/public",t(t.s=5)}({1:function(e,n,t){"use strict";t.d(n,"a",(function(){return v})),t.d(n,"b",(function(){return w}));var o=()=>{const e=[];let n=!1;return{destroy(t){n=!0,e.forEach(e=>{e(t)})},onDestroy(t){n?t():e.push(t)}}};const r={"http:":"80","https:":"443"},i=/^(https?:)?\/\/([^/:]+)?(:(\d+))?/,s=["file:","data:"];var a,c,d,l,u,m=e=>(...n)=>{e&&console.log("[Penpal]",...n)};!function(e){e.Call="call",e.Reply="reply",e.Syn="syn",e.SynAck="synAck",e.Ack="ack"}(a||(a={})),function(e){e.Fulfilled="fulfilled",e.Rejected="rejected"}(c||(c={})),function(e){e.ConnectionDestroyed="ConnectionDestroyed",e.ConnectionTimeout="ConnectionTimeout",e.NotInIframe="NotInIframe",e.NoIframeSrc="NoIframeSrc"}(d||(d={})),function(e){e.DataCloneError="DataCloneError"}(l||(l={})),function(e){e.Message="message"}(u||(u={}));const g=({name:e,message:n,stack:t})=>({name:e,message:n,stack:t});var p=(e,n,t)=>{const{localName:o,local:r,remote:i,originForSending:s,originForReceiving:d}=e;let m=!1;const p=e=>{if(e.source!==i||e.data.penpal!==a.Call)return;if(e.origin!==d)return void t(`${o} received message from origin ${e.origin} which did not match expected origin ${d}`);const r=e.data,{methodName:u,args:p,id:f}=r;t(`${o}: Received ${u}() call`);const h=e=>n=>{if(t(`${o}: Sending ${u}() reply`),m)return void t(`${o}: Unable to send ${u}() reply due to destroyed connection`);const r={penpal:a.Reply,id:f,resolution:e,returnValue:n};e===c.Rejected&&n instanceof Error&&(r.returnValue=g(n),r.returnValueIsError=!0);try{i.postMessage(r,s)}catch(e){if(e.name===l.DataCloneError){const n={penpal:a.Reply,id:f,resolution:c.Rejected,returnValue:g(e),returnValueIsError:!0};i.postMessage(n,s)}throw e}};new Promise(e=>e(n[u].apply(n,p))).then(h(c.Fulfilled),h(c.Rejected))};return r.addEventListener(u.Message,p),()=>{m=!0,r.removeEventListener(u.Message,p)}};let f=0;var h=(e,n,t,o,r)=>{const{localName:i,local:s,remote:l,originForSending:m,originForReceiving:g}=n;let p=!1;r(i+": Connecting call sender");const h=e=>(...n)=>{let t;r(`${i}: Sending ${e}() call`);try{l.closed&&(t=!0)}catch(e){t=!0}if(t&&o(),p){const n=new Error(`Unable to send ${e}() call due to destroyed connection`);throw n.code=d.ConnectionDestroyed,n}return new Promise((t,o)=>{const d=++f,p=n=>{if(n.source!==l||n.data.penpal!==a.Reply||n.data.id!==d)return;if(n.origin!==g)return void r(`${i} received message from origin ${n.origin} which did not match expected origin ${g}`);const m=n.data;r(`${i}: Received ${e}() reply`),s.removeEventListener(u.Message,p);let f=m.returnValue;m.returnValueIsError&&(f=(e=>{const n=new Error;return Object.keys(e).forEach(t=>n[t]=e[t]),n})(f)),(m.resolution===c.Fulfilled?t:o)(f)};s.addEventListener(u.Message,p);const h={penpal:a.Call,id:d,methodName:e,args:n};l.postMessage(h,m)})};return t.reduce((e,n)=>(e[n]=h(n),e),e),()=>{p=!0}};var y=(e,n)=>{let t;return void 0!==e&&(t=window.setTimeout(()=>{const t=new Error(`Connection timed out after ${e}ms`);t.code=d.ConnectionTimeout,n(t)},e)),()=>{clearTimeout(t)}},v=e=>{let{iframe:n,methods:t={},childOrigin:c,timeout:l,debug:g=!1}=e;const f=m(g),v=o(),{onDestroy:w,destroy:C}=v;c||((e=>{if(!e.src&&!e.srcdoc){const e=new Error("Iframe must have src or srcdoc property defined.");throw e.code=d.NoIframeSrc,e}})(n),c=(e=>{if(e&&s.find(n=>e.startsWith(n)))return"null";const n=document.location,t=i.exec(e);let o,a,c;t?(o=t[1]?t[1]:n.protocol,a=t[2],c=t[4]):(o=n.protocol,a=n.hostname,c=n.port);return`${o}//${a}${c&&c!==r[o]?":"+c:""}`})(n.src));const b="null"===c?"*":c,E=((e,n,t,o)=>r=>{if(r.origin!==t)return void e(`Parent: Handshake - Received SYN message from origin ${r.origin} which did not match expected origin ${t}`);e("Parent: Handshake - Received SYN, responding with SYN-ACK");const i={penpal:a.SynAck,methodNames:Object.keys(n)};r.source.postMessage(i,o)})(f,t,c,b),S=((e,n,t,o,r)=>{const{destroy:i,onDestroy:s}=o;let a,c;const d={};return o=>{if(o.origin!==n)return void r(`Parent: Handshake - Received ACK message from origin ${o.origin} which did not match expected origin ${n}`);r("Parent: Handshake - Received ACK");const l={localName:"Parent",local:window,remote:o.source,originForSending:t,originForReceiving:n};a&&a(),a=p(l,e,r),s(a),c&&c.forEach(e=>{delete d[e]}),c=o.data.methodNames;const u=h(d,l,c,i,r);return s(u),d}})(t,c,b,v,f);return{promise:new Promise((e,t)=>{const o=y(l,C),r=t=>{if(t.source===n.contentWindow&&t.data)if(t.data.penpal!==a.Syn)if(t.data.penpal!==a.Ack);else{const n=S(t);n&&(o(),e(n))}else E(t)};window.addEventListener(u.Message,r),f("Parent: Awaiting handshake"),((e,n)=>{const{destroy:t,onDestroy:o}=n,r=setInterval(()=>{document.contains(e)||(clearInterval(r),t())},6e4);o(()=>{clearInterval(r)})})(n,v),w(e=>{window.removeEventListener(u.Message,r),e||((e=new Error("Connection destroyed")).code=d.ConnectionDestroyed),t(e)})}),destroy(){C()}}};var w=(e={})=>{const{parentOrigin:n="*",methods:t={},timeout:r,debug:i=!1}=e,s=m(i),c=o(),{destroy:l,onDestroy:g}=c;(()=>{if(window===window.top){const e=new Error("connectToParent() must be called within an iframe");throw e.code=d.NotInIframe,e}})();const f=((e,n,t,o)=>{const{destroy:r,onDestroy:i}=t;return t=>{if(!(e instanceof RegExp?e.test(t.origin):"*"===e||e===t.origin))return void o(`Child: Handshake - Received SYN-ACK from origin ${t.origin} which did not match expected origin ${e}`);o("Child: Handshake - Received SYN-ACK, responding with ACK");const s="null"===t.origin?"*":t.origin,c={penpal:a.Ack,methodNames:Object.keys(n)};window.parent.postMessage(c,s);const d={localName:"Child",local:window,remote:window.parent,originForSending:s,originForReceiving:t.origin},l=p(d,n,o);i(l);const u={},m=h(u,d,t.data.methodNames,r,o);return i(m),u}})(n,t,c,s);return{promise:new Promise((e,t)=>{const o=y(r,l),i=n=>{if((()=>{try{clearTimeout()}catch(e){return!1}return!0})()&&n.source===parent&&n.data&&n.data.penpal===a.SynAck){const t=f(n);t&&(window.removeEventListener(u.Message,i),o(),e(t))}};window.addEventListener(u.Message,i),(()=>{s("Child: Handshake - Sending SYN");const e={penpal:a.Syn},t=n instanceof RegExp?"*":n;window.parent.postMessage(e,t)})(),g(e=>{window.removeEventListener(u.Message,i),e||((e=new Error("Connection destroyed")).code=d.ConnectionDestroyed),t(e)})}),destroy(){l()}}}},5:function(e,n,t){"use strict";t.r(n);var o=t(1);document.addEventListener("DOMContentLoaded",(function(){console.log("DOMContentLoaded");var e=document.getElementById("iframe_rpa");e&&Object(o.a)({iframe:e,debug:!0,methods:{getName:function(){return"test Name"},getZoomPercentage:function(){return"100"},needLogin:function(){return{tab:"ftp",host:"ftp.test.com",port:"21",login:"test@cashstory.com",pwd:"test password"}}}}).promise.then((function(e){console.log("child",e)}))}))}});